{% extends 'job_seeker_dashboard.html' %}

{% block title %}Personal Details{% endblock %}

{% block content %}
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

<div id="personal_details" class="content-section active">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="#">Dashboard</a></li>
            <li class="breadcrumb-item active" aria-current="page">Personal details & Contact details</li>
        </ol>
    </nav>

    <form>
        <div class="row">
            <!-- Personal Details Section -->
            <div class="col-md-6">
                <div class="form-group">
                    <label for="title">Title</label>
                    <div id="title-checkboxes">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="mr" name="title" value="Mr." {% if 'Mr.' in user.profile.title %}checked{% endif %}>
                            <label class="form-check-label" for="mr">Mr.</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="mrs" name="title" value="Mrs." {% if 'Mrs.' in user.profile.title %}checked{% endif %}>
                            <label class="form-check-label" for="mrs">Mrs.</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="ms" name="title" value="Ms." {% if 'Ms.' in user.profile.title %}checked{% endif %}>
                            <label class="form-check-label" for="ms">Ms.</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="dr" name="title" value="Dr." {% if 'Dr.' in user.profile.title %}checked{% endif %}>
                            <label class="form-check-label" for="dr">Dr.</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="prof" name="title" value="Prof." {% if 'Prof.' in user.profile.title %}checked{% endif %}>
                            <label class="form-check-label" for="prof">Prof.</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="other_title" name="title" value="Other" {% if 'Other' in user.profile.title %}checked{% endif %}>
                            <label class="form-check-label" for="other_title">Other</label>
                            <input type="text" class="form-control mt-2" id="other_title_text" name="other_title_text" style="{% if 'Other' in user.profile.title %}display: block;{% else %}display: none;{% endif %}" placeholder="Please specify" value="{% if 'Other' in user.profile.title %}{{ user.profile.other_title_text }}{% endif %}">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="id-number">ID Number</label>
                    <input type="text" class="form-control" id="idnumber" name="idnumber" value="{{user.profile.idnumber}}" disabled>
                </div>
                <div class="form-group">
                    <label for="first-name">First Name</label>
                    <input type="text" class="form-control" id="first_name" name="first_name" value="{{user.first_name}}">
                </div>
                <div class="form-group">
                    <label for="surname">Surname</label>
                    <input type="text" class="form-control" id="last_name" name="last_name" value="{{user.last_name}}">
                </div>
                <div class="form-group">
                    <label for="gender">Gender</label>
                    <select class="form-control" id="gender" name="gender" onchange="toggleOtherInput(this, 'gender_other')">
                        <option value="{{user.profile.gender}}" selected>{{user.profile.gender}}</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="Other">Other</option>
                    </select>
                    <input type="text" class="form-control mt-2" id="gender_other" name="gender_other" style="display: none;" placeholder="Please specify">
                </div>
                <div class="form-group">
                    <label for="marital-status">Marital Status</label>
                    <select class="form-control" id="marital_status" name="marital_status">
                        <option value="{{user.profile.marital_status}}" selected>{{user.profile.marital_status}}</option>
                        <option value="Married">Married</option>
                        <option value="Single">Single</option>
                        <option value="Divorced">Divorced</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="race">Select Race</label>
                    <select class="form-control" id="race" name="race" onchange="toggleOtherInput(this, 'race_other')">
                        <option value="{{user.profile.race}}" selected>{{user.profile.race}}</option>
                        <option value="Black">Black African</option>
                        <option value="Coloured">Coloured</option>
                        <option value="White">White</option>
                        <option value="Other">Other</option>
                    </select>
                    <input type="text" class="form-control mt-2" id="race_other" name="race_other" style="display: none;" placeholder="Please specify">
                </div>
                <div class="form-group">
                    <label for="dob">Date of Birth</label>
                    <input type="date" class="form-control" id="dob" name="dob" value="{{user.profile.dob}}">
                </div>
                <div class="form-group">
                    <label for="disability">Disability</label>
                    <select class="form-control" id="disability" name="disability" onchange="toggleOtherInput(this, 'disability_other')">
                        <option value="{{user.profile.disability}}" selected>{{user.profile.disability}}</option>
                        <option value="Hearing">Hearing</option>
                        <option value="Vision">Vision</option>
                        <option value="Mobility">Mobility</option>
                        <option value="Cognitive">Cognitive</option>
                        <option value="Other">Other</option>
                    </select>
                    <input type="text" class="form-control mt-2" id="disability_other" name="disability_other" style="display: none;" placeholder="Please specify">
                </div>
            </div>

            <!-- Contact Details Section -->
            <div class="col-md-6">
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="text" class="form-control" id="email" name="email" value="{{user.email}}">
                </div>
                <div class="form-group">
                    <label for="telephone">Telephone</label>
                    <input type="tel" class="form-control" id="phone" name="phone" value="{{user.profile.phone}}">
                </div>
                <div class="form-group">
                    <label for="linkedin-profile">LinkedIn Profile</label>
                    <input type="url" class="form-control" id="linkedin_profile" name="linkedin_profile" value="{{user.profile.linkedin_profile}}">
                </div>
                <div class="form-group">
                    <label for="personal-website">Personal Website</label>
                    <input type="url" class="form-control" id="personal_website" name="personal_website" value="{{user.profile.personal_website}}">
                </div>
            </div>
        </div>
        <button type="button" role="button" onclick="handle_update_profile_info_button_click()" class="btn btn-primary">Update</button>
    </form>
</div>

<script>
    function toggleOtherInput(selectElement, otherInputId) {
        var otherInput = document.getElementById(otherInputId);
        if (selectElement.value === "Other") {
            otherInput.style.display = "block";
        } else {
            otherInput.style.display = "none";
        }
    }

    // Restrict to one title selection and manage "Other" text input visibility
    document.querySelectorAll('#title-checkboxes input[type="checkbox"]').forEach(checkbox => {
        checkbox.addEventListener('change', function() {
            if (this.value === 'Other') {
                document.getElementById('other_title_text').style.display = this.checked ? 'block' : 'none';
            } else {
                if (this.checked) {
                    document.querySelectorAll('#title-checkboxes input[type="checkbox"]').forEach(cb => {
                        if (cb !== this) {
                            cb.checked = false;
                        }
                    });
                    document.getElementById('other_title_text').style.display = 'none'; // Hide "Other" text input when other titles are selected
                }
            }
        });
    });
</script>

{% endblock %}
