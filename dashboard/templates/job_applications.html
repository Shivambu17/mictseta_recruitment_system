{% extends 'dashboard_base.html' %}

{% block title %}Job Applications {% endblock %}

{% block breadcrumbs %}
    <li class="breadcrumb-item active" aria-current="page"> Jobs/Vacancy </li>
      <li class="breadcrumb-item active" aria-current="page"> Applications </li>
 {% endblock %}

{% block content %}
<div class="  mt-3 ">
       <a href="{% url 'dashboard.job_applications' %}" class="btn btn-info m-1">filter by : ALL
       </a>
    {% for applied_job in applied_jobs %}

      {% if applied_job.status == "closed" %}
        <a href="{% url 'filter_job_application' applied_job.id %}" class="btn btn-danger m-1">filter by : {{applied_job.title}}</a>
      {% else %}
        <a href="{% url 'filter_job_application' applied_job.id %}" class="btn btn-success m-1">filter by : {{applied_job.title}}
       </a>
      {% endif %}
    {% endfor %}
 
</div>
       <div class="row justify-content-center">
         <div class="col-9 mt-2">
          <div id="applications" style="display:block;">
            <div class="card shadow-lg mt-3 rounded">
                <div class="card-header d-flex justify-content-between " style="height:50px;">
                  <h6>ALL Application List</h6> 
                  
                  <button class="btn btn-warning">Auto Short-list</button>
                </div>

                <div class="card-body" style="overflow-x: scroll;"> 

                    <table id="application" class="table table-striped table-hover" style="width:100%">
                          <thead>
                              <tr>
                                  <th class="bg-dark text-white">Email </th>
                                  <th class="bg-dark text-white">Job Title</th>
                                  <th class="bg-dark text-white">Job type</th>
                                  <th class="bg-dark text-white">Job status</th>
                                  <th class="bg-dark text-white">Date</th>
                                  <th class="bg-dark text-white">Action</th>
                                  
                              </tr>
                          </thead>
                          <tbody> 
                               
                          {% for application in applications %}
                          {% if application.status == "pending" %}
                           <tr class="text-dark">
                              <td>{{application.user.email}}</td>
                              <td>{{application.job.title}}</td>
                              <td>{{application.job.job_type}}</td>
                              {% if application.job.status == 'closed' %}
                              <td><button class="btn btn-danger p-0">{{application.job.status}}</button></td>
                              {% else %}
                              <td><button class="btn btn-success p-0">{{application.job.status}}</button></td>
                              {% endif %}
                              <td>{{application.date}}</td>
                              <td> <a href="{% url 'dashboard.jobsekeer_details' application.user.profile.uuid %}" class="btn btn-primary p-1"><i class="fa fa-eye"> </i> view</a>
                               <a onclick="move_to_interview({{application.id}})" class="btn btn-success p-1"><i class="fa fa-plus"> </i> interview</a></td>
                          </tr>
                          {% endif%}
                              {% endfor %}                 
                          </tbody>
                          <tfoot>
                            <tr>      
                            </tr>
                          </tfoot>
                        </table>
                </div>
                <script >
                
                $(document).ready(function (){

                  new DataTable('#application');

                });

              </script>
            </div>
           </div> 

           <div id="shortlistss" style="display:none;">
            <div class="card shadow-lg mt-3 rounded">
                <div class="card-header d-flex justify-content-between " style="height:50px;">
                  <h6>ALL Short-Listed Candidates List List</h6> 
                </div>

                <div class="card-body" style="overflow-x: scroll;"> 
                    <table id="shortlist-table" class="table table-striped table-hover" style="width:100%">
                          <thead>
                              <tr>
                                  <th class="bg-dark text-white">Email</th>
                                  <th class="bg-dark text-white">Job Title</th>
                                  <th class="bg-dark text-white">Job type</th>
                                  <th class="bg-dark text-white">Job Status</th>
                                  <th class="bg-dark text-white">Date</th>
                                  <th class="bg-dark text-white">Action</th>
                                  
                              </tr>
                          </thead>
                          <tbody> 
                               
                          {% for application in applications %}
                          {% if application.status == "short_list" %}
                           <tr class="text-dark">
                              <td>{{application.user.email}}</td>
                              <td>{{application.job.title}}</td>
                              <td>{{application.job.job_type}}</td>
                              {% if application.job.status == 'closed' %}
                              <td><button class="btn btn-danger p-0">{{application.job.status}}</button></td>
                              {% else %}
                              <td><button class="btn btn-success p-0">{{application.job.status}}</button></td>
                              {% endif %}
                              <td>{{application.date}}</td>
                              <td> <a  onclick="move_to_interview({{application.id}})" class="btn btn-success p-1"><i class="fa fa-plus"></i> interview</a> <a class="btn btn-danger p-1"><i class="fa fa-trash"></i> </a></td>
                          </tr>
                          {% endif %}
                              {% endfor %}                 
                          </tbody>
                          <tfoot>
                            <tr>      
                            </tr>
                          </tfoot>
                        </table>
                </div>
                <script >
                
                $(document).ready(function (){

                  new DataTable('#shortlist-table');

                });

              </script>
            </div>
           </div>   
       

        <div id="interview" style="display:none;">
            <div class="card shadow-lg mt-3 rounded">
                <div class="card-header d-flex justify-content-between " style="height:50px;">
                  <h6>ALL Inerview Candidate List</h6> 
                </div>

                <div class="card-body" style="overflow-x: scroll;"> 
                    <table id="interview-table" class="table table-striped table-hover" style="width:100%">
                          <thead>
                              <tr>
                                  <th class="bg-dark text-white">Email</th>
                                  <th class="bg-dark text-white">Job Title</th>
                        
                                  <th class="bg-dark text-white">Interview Date</th>
                                  <th class="bg-dark text-white">Status</th>
                                  <th class="bg-dark text-white">Action</th>
                                  
                              </tr>
                          </thead>
                          <tbody> 
                               
                          {% for application in applications %}
                          {% if application.status == "interview" %}
                           <tr class="text-dark">
                              <td>{{application.user.email}}</td>
                              <td>{{application.job.title}}</td>
                          
                              <td>Not Set</td>
                              {% if application.job.status == 'closed' %}
                              <td><button class="btn btn-danger p-0">{{application.job.status}}</button></td>
                              {% else %}
                              <td><button class="btn btn-success p-0">{{application.job.status}}</button></td>
                              {% endif %}
                              <td> <a href="{% url 'dashboard.jobsekeer_details' application.user.profile.uuid %}" class="btn btn-primary">View</a> 
                              <a href="#" class="btn btn-warning">Set Date</a>
                              <a onclick="approve_interview({{application.id}})" class="btn btn-success">approve</a>
                              <a onclick="reject_interview({{application.id}})" class="btn btn-danger">reject</a>
                              reject_interview
                              </td>
                          </tr>
                          {% endif %}
                              {% endfor %}                 
                          </tbody>
                          <tfoot>
                            <tr>      
                            </tr>
                          </tfoot>
                        </table>
                </div>
                <script >
                
                $(document).ready(function (){

                  new DataTable('#interview-table');

                });

              </script>
            </div>
           </div> 


        <div id="on_hold" style="display:none;">
            <div class="card shadow-lg mt-3 rounded">
                <div class="card-header d-flex justify-content-between " style="height:50px;">
                  <h6>ALL Candidates Rejected</h6> 
                  <button class="btn btn-info" onclick="purge()">Purge List</button>
                </div>

                <div class="card-body" style="overflow-x: scroll;"> 
                    <table id="on_hold-table" class="table table-striped table-hover" style="width:100%">
                          <thead>
                              <tr>
                                  <th class="bg-dark text-white">Email</th>
                                  <th class="bg-dark text-white">Job Title</th>
                                  <th class="bg-dark text-white">Job type</th>
                                  <th class="bg-dark text-white">Date</th>
                                  <th class="bg-dark text-white">Status</th>
                                  <th class="bg-dark text-white">Action</th>
                                  
                              </tr>
                          </thead>
                          <tbody> 
                               
                          {% for application in applications %}
                          {% if application.status == "rejected" %}
                           <tr class="text-dark">
                              <td>{{application.user.email}} </td>
                              <td>{{application.job.title}}</td>
                              <td>{{application.job.job_type}}</td>
                              <td>{{application.date}}</td>
                              {% if application.job.status == 'closed' %}
                              <td><button class="btn btn-danger p-0">{{application.job.status}}</button></td>
                              {% else %}
                              <td><button class="btn btn-danger p-0">{{application.job.status}}</button></td>
                              {% endif %}
                              <td> <a href="{% url 'dashboard.jobsekeer_details' application.user.profile.uuid %}">View</a> </td>
                          </tr>
                          {% endif %}
                              {% endfor %}                 
                          </tbody>
                          <tfoot>
                            <tr>      
                            </tr>
                          </tfoot>
                        </table>
                </div>
                <script >
                
                $(document).ready(function (){

                  new DataTable('#on_hold-table');

                });

              </script>
            </div>
           </div> 


        <div id="approved" style="display:none;">
            <div class="card shadow-lg mt-3 rounded">
                <div class="card-header d-flex justify-content-between " style="height:50px;">
                  <h6>Approved Candidates List</h6> 
                </div>

                <div class="card-body" style="overflow-x: scroll;"> 
                    <table id="approved-table" class="table table-striped table-hover" style="width:100%">
                          <thead>
                              <tr>
                                  <th class="bg-dark text-white">Email </th>
                                  <th class="bg-dark text-white">Job Title</th>
                                  <th class="bg-dark text-white">Job type</th>
                                  <th class="bg-dark text-white">Date</th>
                                  <th class="bg-dark text-white">Status</th>
                                  <th class="bg-dark text-white">Action</th>
                                  
                              </tr>
                          </thead>
                          <tbody> 
                               
                          {% for application in applications %}
                          {% if application.status == "approved" %}
                           <tr class="text-dark">
                              <td>{{application.user.email}} </td>
                              <td>{{application.job.title}}</td>
                              <td>{{application.job.job_type}}</td>
                              <td>{{application.date}}</td>
                              {% if application.job.status == 'closed' %}
                              <td><button class="btn btn-danger p-0">{{application.job.status}}</button></td>
                              {% else %}
                              <td><button class="btn btn-danger p-0">{{application.job.status}}</button></td>
                              {% endif %}
                              <td> <a href="{% url 'dashboard.jobsekeer_details' application.user.profile.uuid %}">View</a> </td>
                          
                          </tr>
                          {% endif %}
                              {% endfor %}                 
                          </tbody>
                          <tfoot>
                            <tr>      
                            </tr>
                          </tfoot>
                        </table>
                </div>
                <script >
                
                $(document).ready(function (){

                  new DataTable('#approved-table');

                });

              </script>
            </div>
           </div> 


        </div>



         <div class="col-3 mt-4">
           <div class="card p- shadow mb-5  rounded" >
      <div class="card-body">
        
      <ul id="applicants" class="list-group list-group-flush " style="cursor: pointer;">
        <li class="list-group-item emp-profile active" onclick="toggleV('applications')">All Applications</li>
        <li class="list-group-item emp-profile" onclick="toggleV('shortlistss')">Short-listed</li>
        <li class="list-group-item emp-profile" onclick="toggleV('interview')">Interview</li>
        <li class="list-group-item emp-profile" onclick="toggleV('on_hold')">Rejected</li>
        <li class="list-group-item emp-profile" onclick="toggleV('approved')">Approved/Accepted</li>

      </ul>
 
      </div>

      <!-- <div class="card-body">
        <a href="#" class="card-link">Download CV</a>
        <a href="#" class="card-link">Download ID</a>
      </div> -->
    </div>
         </div>
       </div>
        
{% endblock %}



